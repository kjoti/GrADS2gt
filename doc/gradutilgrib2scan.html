<!--Copyright (C) 1988-2005 by the Institute of Global Environment and Society (IGES). See file COPYRIGHT for more information.-->

<html>
<head>
<title>GrADS Utilities: grib2scan</title>
<style type="text/css">
<!--
.style1 {color: #006600}
.style2 {color: #0033FF}
.style3 {color: #996600}
.style4 {color: #006666}
.style5 {color: #993366}
.style6 {color: #FF66FF}
.style8 {color: #990000}
.style11 {color: #00CC33}
.style12 {color: #9900FF}
.style13 {color: #FF6600}
.style14 {
	color: #990;
}
.style15 {
	color: #F00;
}
.red {
	color: #900;
}
-->
</style>
</head>
<body text="#000000" bgcolor="e0f0ff">

<h2><b>grib2scan</b></h2>

<p>
The <code>grib2scan</code> utility is used for finding out what is inside a GRIB2 data file. It scans each record in the file, and prints out relevant information about the data in the record. 
The command sytax is:
<ul>
<code>grib2scan [-v] <i>fname</i></code></ul>
<p>
Where <code><i>fname</i></code>
 is the input GRIB2 file name, and the <code>-v</code> option is used for verbose output. 
<p>To assist in the interpretation of the grib2scan output, here are some links to GRIB2 documentation: <a href="http://www.wmo.int/pages/prog/www/WMOCodes/GRIB.html" target="_parent"><br>
  WMO</a> (the official source)<a href="http://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc.shtml" target="_parent"><br>
NCEP</a> (unofficial, but with a user-friendly web interface). 
<p>A GRIB2 file is a collection of records, each with a complete set of metadata to describe the data contained in the record. A GRIB2 record has 9 sections, some of which may occur more than once. The output from grib2scan is printed out as it scans each section of the record. Below are  examples of the  grib2scan output from   different GRIB2 records. An explanation of the output follows.
<p><code>
Record 1 starts at 0 of length <span class="style3">17242</span><br>
  &nbsp;&nbsp;<span class="style2">Discipline=0</span> (Meteorological)
  <br>
  <span class="style1">&nbsp;&nbsp;Reference Time</span> = 2007-10-09 00:00:00  
  <span class="style4">Start of Forecast</span>  <br>
  &nbsp;Field 1 <br>
  &nbsp;&nbsp;<span class="style5">GDT=0</span> (Lat/Lon) nx*ny=10512
   <br>
  &nbsp;&nbsp;&nbsp;XDEF 144 linear 0.000000 2.500000
  <br>
  &nbsp;&nbsp;&nbsp;YDEF 73 linear 90.000000 2.500000
  <br>
  &nbsp;&nbsp;<span class="style6">PDT=1</span> Forecast Time = 0 Hour 
  <br>
  &nbsp;&nbsp; Parameter: <span class="style13">disc,cat,num</span> = 0,3,5  <br>
  &nbsp;&nbsp; Level: <span class="style8">ltype,lval</span> = 100,20000   (sf,sval = 0 20000) 
  <br>
  &nbsp;&nbsp; Ens: <span class="style11">type,pert</span> = 3,1 (total=10) 
  <br>
  &nbsp;&nbsp;<span class="style12">DRT=40</span> (Grid Point Data - JPEG2000 Compression) (Lossless)<br>
  <span class="style15"> ctl: var1.1   0,100,20000  0,3,5   description  </span><br>
  <br>
  Record 2 starts at 17242 of length <span class="style3">110483</span>  <br>
  &nbsp;&nbsp;<span class="style2">Discipline=0</span> (Meteorological)
  <br>
  &nbsp;&nbsp;<span class="style1">Reference Time</span> = 2007-10-09 00:00:00  <span class="style4">Start of Forecast</span>  <br>
  &nbsp;Field 1 
  <br>
  &nbsp;
  <span class="style5">GDT=0</span> (Lat/Lon) nx*ny=259920
   <br>
  &nbsp;&nbsp;&nbsp;XDEF 720 linear 0.000000 0.500000
  &nbsp;&nbsp;&nbsp;<br>
  &nbsp;&nbsp;&nbsp;YDEF 361 linear 90.000000 0.500000
  <br>
  &nbsp;&nbsp;<span class="style6">PDT=8</span> 6 Hour Average EndTime = 2007-10-09 06:00 
  <br>
  &nbsp;&nbsp; Parameter: <span class="style13">disc,cat,num,sp</span> = 0,1,7,0
  <br>
  &nbsp;&nbsp; Level: <span class="style8">ltype,lval</span> = 1,0   (sf,sval = 0 0) 
  <br>
  &nbsp;&nbsp;<span class="style12">DRT=40</span> (Grid Point Data - JPEG2000 Compression) (Lossless)<br>
   <span class="style15">ctl:  var2.1     0,1,0  0,1,7,0     description </span></code>
<p><code>Record 3 starts at 16469 of length <span class="style3">2300 </span><br>
  <span class="style2">  Discipline=0</span> (Meteorological)<br>
    <span class="style1">Reference Time</span> = 2012-09-11 03:00:00  (Start of Forecast)<br>
   Field 1 <br>
    <span class="style5">GDT=30</span> (Lambert Conformal) nx*ny=23865<br>
     nx=185 ny=129 lon1=226.541000 lat1=12.190000<br>
     reflon=265.000000 dx=40635.000000 dy=40635.000000<br>
     latin1=25.000000 latin2=25.000000 <br>
    <span class="style6">PDT=5</span> 0 Hour Forecast  Valid Time = 2012-09-11 03:00 <br>
     Parameter: <span class="style13">disc,cat,num</span> = 0,0,0<br>
     Level: <span class="style8">ltype,lval</span> = 100,85000   (sf,sval = 0 85000)<br>
     Prob: <span class="style14">type,lim</span> = 0,273  (Probability of event below 273)<br>
    <span class="style12">DRT=40</span> (Grid Point Data - JPEG2000 Compression) (Lossless) <br>
   <span class="style15">ctl:  var3.1     0,100,85000   a0,273   0,0,0     description </span><br>
  <br>
  Record 4 starts at 37355 of length <span class="style3">205 </span><br>
  <span class="style2">Discipline=0</span> (Meteorological)<br>
  <span class="style1">Reference Time</span> = 2012-07-25 00:00:00  (Start of Forecast)<br>
 Field 1 <br>
  <span class="style5">GDT=0</span> (Lat/Lon) nx*ny=65160<br>
   XDEF 360 linear 0.000000 1.000000<br>
   YDEF 181 linear 90.000000 1.000000<br>
  <span class="style6">PDT=48</span> 0 Hour Forecast  Valid Time = 2012-07-25 00:00 <br>
   Parameter: <span class="style13">disc,cat,num</span> = 0,20,12<br>
   Level: <span class="style8">ltype,lval</span> = 10,0   (sf,sval = 0 0)<br>
   Aerosol: <span class="style14">atyp,styp,s1,s2 </span>= 62001,0,2e-05,0  (size is &lt; 2e-05) <br>
  <span class="style12">DRT=40</span> (Grid Point Data - JPEG2000 Compression) (Lossless) <br>
 <span class="style15">ctl:  var4.1     0,10,0   a62001,0,2e-05,0   0,20,12     description</span> </code>
<p>Section 0, the Indicator Section, contains info grib2scan uses to confirm it is looking at a GRIB2 file. This section also contains the <span class="style2">Discipline</span>, as well as the <span class="style3">size of the entire record</span>. 
<p>Section 1, the Identification Section,  contains characteristics that apply to all data in the record. Sections 0 and 1 are the only ones that may not be repeated in a GRIB2 record. From  section 1 we get the <span class="style1">Reference Time</span> printed in a YYYY-MM-DD HH:MM:SS format, plus the <span class="style4">significance of the reference time</span>.
<p>Section 3, the Grid Definition Section,  contains the definition of the grid surface and geometry of the data values in the grid. The Grid Definition Template (<span class="style5">GDT</span>) value indicates the grid type -- in Record 1, the data are on a Lat/Lon grid at 2.5-degree resolution; Record 2 has a 0.5-degree Lat/Lon grid. For some <span class="style5">GDT</span> values, grib2scan in verbose mode will print out  helpful information for creating the XDEF and YDEF or PDEF entries for the descriptor file. 
<p>Section 4, the Product Definition Section,  contains a lot of essential information about the nature of the data -- what the variable is called, its units, its vertical level, its valid time, whether it is part of an ensemble set, and whether it is an instantaneous value or statistically processed in some way. The Product Definition Template (<span class="style6">PDT</span>) value tells grib2scan  where to get the parameter category and number, which, along with the discipline, are required codes to uniquely identify the variable in the descriptor file. These three numbers, the <span class="style13">discipline, category, and number</span>, are printed out in comma-delimed format, so you can cut and paste them directly into your descriptor file. In Record 1, the parameter is &quot;Discipline 0: Meteorological products, Parameter Category 3: Mass, Parameter Number 5: Geopotential Height&quot;. 
If the parameter has been statistically processed (i.e. it is an average or an accumulation over a period of time), then a fourth number is required by GrADS to  indicate the kind of statistical process used to generate the parameter: the <span class="style13">discipline, category, number, and statistical process</span> must go into the descriptor file. In Record 2, the parameter is &quot;Discipline 0: Meterological products, Parameter Category 1: Moisture, Parameter Number 7: Precipitation rate, Statistical Process 0: Average (6 hour)&quot;. 
Section 4 also give the parameter's <span class="style8">level type and value</span> -- 
  
  these comma-delimited numbers can also be copied from the grib2scan output into your descriptor file. In the first example, the level type is pressure, and the level value is 20000 Pascals (or 200 mb). Note that if a parameter occurs on more than one pressure level, you should use ZDEF to list the pressure level values and omit the level value in the variable declaration. Pressure values are converted back to millibars internally if you use the OPTIONS  keyword &quot;pascals&quot;. In Record 2, the level type is the ground or water surface and the value is 0. Finally, if it is relevant, ensemble 

metadata also appears in section 4. Ensemble metadata is only relevant in Record 1, and appears as an <span class="style11">ensemble type and perturbation number</span>. Parameters that are derived from all ensemble members only require one code, a number that indicates the type of derived forecast (e.g. ensemble mean). These ensemble codes  belong in the exanded form of the EDEF declaration. 
<p>Starting with <span class="red">GrADS Version 2.0.2</span>, support was added for GRIB2 products that require additional codes. These are for <span class="style6">PDT 5</span> and <span class="style6">9</span> (forecast probabilities) and <span class="style6">PDT 48</span> (aerosol properties). The <span class="style14">additional  codes</span> are listed after the <span class="style13">parameter</span> and <span class="style8">level </span>information. The <span class="style14">additional codes</span> are different for each <span class="style5"><span class="style6">PDT</span></span>. See the documetation on <a href="descriptorfile.html#VARS">descriptor file elements</a> for more information. 
<p>Section 5, the Data Representation Section,  contains information about how the data are represented. The Data Representation Template (<span class="style12">DRT</span>) number is not required in a GrADS descriptor file, but because it is sometimes useful to know how the data are formatted in the GRIB2 file, it is included in the grib2scan output. 

<p>Starting with <span class="red">GrADS Version 2.0.2</span>, another new feature was added to the grib2scan output, a suggestion for a descriptor file entry for each field in the grib2 file. This is shown in<span class="style15"> red</span> at the bottom with the prefix &quot;<span class="style15">ctl: </span>&quot;. 
</body>
</html>
